


DROP DATABASE IF EXISTS Oriflame;
CREATE DATABASE Oriflame;
USE	 Oriflame;

CREATE TABLE orders(
	orderID VARCHAR(20) PRIMARY KEY,
	price DOUBLE(10,2) NOT NULL,
	orderLocation VARCHAR(45) NOT NULL,
	numberOfItems VARCHAR(100) NOT NULL,
	availability INT(50) NOT NULL


);

CREATE TABLE products(
	productID VARCHAR(20) PRIMARY KEY,
	expiryDate DATE NOT NULL,
	productName VARCHAR(30) NOT NULL,
	price DOUBLE(10,2) NOT NULL,
	orderID VARCHAR(30),
	CONSTRAINT FOREIGN KEY (orderID) REFERENCES orders(orderID)
	ON DELETE CASCADE ON UPDATE CASCADE

);

CREATE TABLE payment(
	invoice VARCHAR(20) PRIMARY KEY,
	payeeName VARCHAR(30) NOT NULL,
	productPurchased VARCHAR(45) NOT NULL,
	amountPaid DECIMAL(10,2) NOT NULL,
	paymentMode VARCHAR(10) NOT NULL
);

CREATE TABLE employee(
	employeeID VARCHAR(20) PRIMARY KEY,
	salary DOUBLE(10,2) NOT NULL,
	address VARCHAR(45) NOT NULL,
	employeeName VARCHAR(45) NOT NULL,
	productID VARCHAR(20),
	CONSTRAINT FOREIGN KEY (productID) REFERENCES products(productID)
	ON DELETE CASCADE ON UPDATE CASCADE
);
 
CREATE TABLE product_Payment(
	payID VARCHAR(10) PRIMARY KEY,
	productID VARCHAR(6),
	invoice VARCHAR(6),
	date DATE,	
	CONSTRAINT FOREIGN KEY (invoice) REFERENCES payment(invoice)
	ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT FOREIGN KEY (productID) REFERENCES products(productID)
	ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE oriflame_suppliers	(
	supplierID VARCHAR(10) PRIMARY KEY,	
	supplierName VARCHAR(45) NOT NULL,
	supplierLocation VARCHAR(45)
);

insert into oriflame_suppliers
Values("S001","kamal","Colombo");
CREATE TABLE store(
	storeNo VARCHAR(10) PRIMARY KEY,
	storeAddress VARCHAR(45) NOT NULL,
	purchaseNo INT(10) NOT NULL,
	storeName VARCHAR(45) NOT NULL,
	productID VARCHAR(20),
	supplierID VARCHAR(10),
	CONSTRAINT FOREIGN KEY (productID) REFERENCES products(productID)
	ON DELETE CASCADE ON UPDATE CASCADE,
	CONSTRAINT FOREIGN KEY (supplierID) REFERENCES oriflame_suppliers(supplierID)
	ON DELETE CASCADE ON UPDATE CASCADE	

);
CREATE TABLE delivery(
	trackingNo VARCHAR(45) PRIMARY KEY,
	numberOfItems INT(50) NOT NULL,
	shippingType VARCHAR(45) NOT NULL, 
	dateOfDelivery DATE NOT NULL,
	storeNo VARCHAR(45),
	CONSTRAINT FOREIGN KEY (storeNo) REFERENCES store(storeNo)
	ON DELETE CASCADE ON UPDATE CASCADE
);

	
CREATE TABLE user(
	userID VARCHAR(45) PRIMARY KEY,
	userName VARCHAR(45) NOT NULL,
	userEmail VARCHAR(45) NOT NULL,
	userPhone VARCHAR(10) NOT NULL
	
);
